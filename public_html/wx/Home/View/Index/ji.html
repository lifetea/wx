<!DOCTYPE HTML>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>个人主页|车侣威擎</title>
<style type="text/css">
/* 
html5doctor.com Reset Stylesheet
v1.4.1 
2010-03-01
Author: Richard Clark - http://richclarkdesign.com
*/

html, body, div, span, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
abbr, address, cite, code,
del, dfn, em, img, ins, kbd, q, samp,
small, strong, sub, sup, var,
b, i,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section, summary,
time, mark, audio, video {
    margin:0;
    padding:0;
    border:0;
    outline:0;
    font-size:100%;
    vertical-align:baseline;
    background:transparent;
}

body {
    line-height:1;
}

:focus {
	outline: 1;
}

article,aside,canvas,details,figcaption,figure,
footer,header,hgroup,menu,nav,section,summary { 
    display:block;
}

nav ul {
    list-style:none;
}

blockquote, q {
    quotes:none;
}

blockquote:before, blockquote:after,
q:before, q:after {
    content:'';
    content:none;
}

a {
    margin:0;
    padding:0;
    border:0;
    font-size:100%;
    vertical-align:baseline;
    background:transparent;
}

ins {
    background-color:#ff9;
    color:#000;
    text-decoration:none;
}

mark {
    background-color:#ff9;
    color:#000; 
    font-style:italic;
    font-weight:bold;
}

del {
    text-decoration: line-through;
}

abbr[title], dfn[title] {
    border-bottom:1px dotted #000;
    cursor:help;
}

table {
    border-collapse:collapse;
    border-spacing:0;
}

hr {
    display:block;
    height:1px;
    border:0;   
    border-top:1px solid #cccccc;
    margin:1em 0;
    padding:0;
}

input, select {
    vertical-align:middle;
}
</style>
<style type="text/css">
	html,body{
        height: 100%;
        background: url("http://wx.vlegend.cn/Public/ji/ji-bg.jpg");
        background-repeat: repeat-y;
        background-size: 100% auto;
    }
    .main{

        padding-top: 1em;
        height: 100%;
    }

    ul{list-style: none;padding-top: 20px;}
    .clearfix:after {
      content: " ";
      display: block;
      clear: both;
      height: 0;
    }
    .clearfix {
      zoom: 1;
    }    
    .left{float: left;}
    .avatar{
        background: url("http://wx.vlegend.cn/Public/ji/avatar.png");
        background-repeat: no-repeat;
        background-size: 100% auto;
    }
    .avatar img{
        width: 100%;
        border-radius: 50% 50% 50% 50%;
        overflow: hidden;
    }
    .share{
        position: absolute;
        top:0px;
        right: 0px;
    }
    .share img{
        width: 100%;
    }
    .small-avatar img{
        width: 100%;
        border-radius: 50% 50% 50% 50%;
        overflow: hidden;
    }
    .list li{
        float: left;
    }
    .small-avatar{
        margin: 0 3px;
        box-shadow: 0px 2px 6px rgba(0,0,0,0.4);
        border-radius: 50% 50% 50% 50%;
    }
    .jifen{
        background: url("http://wx.vlegend.cn/Public/ji/jifen.png");
        background-repeat: no-repeat;
        background-size: 100% auto;
        text-align: center;
    }
    .jifen span{
        font-family: "微软雅黑";
        font-size: 120%;
    }
    .nichen{
        background: url("http://wx.vlegend.cn/Public/ji/nichen.png");
        background-repeat: no-repeat;
        background-size: 100% auto;
        text-align: center;
    }
    .nichen span{
        font-family: "微软雅黑";
        font-size: 120%;
    }
    .percent{
        text-align: right;
        padding-bottom: 0.5em;
    }
    .percent span{
        
        font-family: "微软雅黑";
        font-size: 120%;
    }
    .paodao{
        background: url("http://wx.vlegend.cn/Public/ji/paodao.jpg");
        background-repeat: repeat-x;
        background-size: auto 100%;
        overflow: hidden;
        box-shadow: 0px 7px 0px rgba(0,0,0,0.3);
    }
    .btn a{
        width: 100%;
        display: inline-block;
        height: 100%;
    }
    .zhu a{
       background: url("http://wx.vlegend.cn/Public/ji/btn-up.png");
       background-size: 100% auto;
       background-repeat: no-repeat;
    }
    .wo a{
       background: url("http://wx.vlegend.cn/Public/ji/wo-up.png");
       background-size: 100% auto;
       background-repeat: no-repeat;
    }
    .cj a{
       background: url("http://wx.vlegend.cn/Public/ji/cj-up.png");
       background-size: 100% auto;
       background-repeat: no-repeat;
    }    
    .zhu a:active{
        background: url("http://wx.vlegend.cn/Public/ji/btn-down.png");
        background-size: 100% auto;
        background-repeat: no-repeat;
    }
  
    .wo a:active{
        background: url("http://wx.vlegend.cn/Public/ji/wo-down.png");
        background-size: 100% auto;
        background-repeat: no-repeat;
    }

    .cj a:active{
        background: url("http://wx.vlegend.cn/Public/ji/cj-down.png");
        background-size: 100% auto;
        background-repeat: no-repeat;
    }

    .fire{
        background: url("http://wx.vlegend.cn/Public/ji/fire.jpg");
        background-repeat: repeat-x;
        background-size: auto 100%;
    }
    .fire img{
        float: right;
    }
    .guanzhu img{
        width: 100%;
    }
  	@media screen and (min-height:736px){
		 		
  	}
  	@media screen and (min-height:800px){
		 		
  	}
  	@media screen and (min-height:1024px){
		 		
  	}
</style>
<link href="http://cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
	<div class="main">
        <div class="avatar">
            <img src="{$user.headimgurl}">

        </div>
        <div class="share">
            <img src="http://wx.vlegend.cn/Public/ji/share.png">
        </div>
        
        <div class="nichen">
            <span>{$user.nickname}</span>
        </div>
        <div class="jifen">
            <span id="jifen">{$user.sum}</span>
        </div> 
        <div class="percent">
            <span>(每个助威可获得50分 | 
                <em id="num">{$count*50}</em>
                /???)</span>
        </div>
        <div class="paodao">
            <div id="fire" class="fire">
                <img src="http://wx.vlegend.cn/Public/ji/plane.png">
            </div>
        </div>
        <ul id="aList" class="list clearfix">
            <volist name="list" id="vo" key="k" >
                <li>
                    <div class="small-avatar">
                        <a href="http://wx.vlegend.cn/ji.html?id={$vo.id}">
                            <img src="{$vo.headimgurl}">
                        </a>
                    </div>
                </li>
            </volist>
        </ul>
        <div class="btn zhu left">
            <a href="javascript:void" id="btn">
            </a>
        </div>
        <div class="btn wo left">
            <if condition="$friendId eq $userId ">
                <a href="javascript:(0)" ></a>
            <else />
                <a href="http://wx.vlegend.cn/ji.html?id={$friendId}" ></a>
            </if>           
            
        </div>
        <div class="btn cj left">
            <a href="http://wx.vlegend.cn/cj.html" >
            </a>
        </div>                
	</div>

<!-- system modal start -->
    <div id="alert" class="modal">
      <div class="modal-dialog modal-sm">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
            <h5 class="modal-title h4">
                <i class="fa fa-exclamation-circle"></i>
                <span id="mTitle">助威成功 2万元红包在等你，还不快来？！</span>
            </h5>
          </div>
          <div class="modal-body">
            <p class="guanzhu" id="mContent" class="h5">
                <img src="http://wx.vlegend.cn/Public/ji/guanzhu.png">
            </p>
          </div>
        </div>
      </div>
    </div>
  <!-- system modal end -->    
    <input type="hidden" id="userId" value="{$userId}">
    <input type="hidden" id="friendId" value="{$friendId}">
    <input type="hidden" id="count" value="{$count|default=0}">
    <input type="hidden" id="headPic" value="{$friend.headimgurl}">
    <script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
    <script src="//cdn.bootcss.com/jquery/1.9.1/jquery.min.js"></script>
    <script src="http://cdn.bootcss.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript">
        window.conf ={

            <if condition="$friendId eq $userId ">
                "link":"http://wx.vlegend.cn/ji.html?id={$friendId}"
            <else />
                "link":"http://wx.vlegend.cn/ji.html?id={$userId}"
            </if>
            
        };
        wx.config({
            debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
            appId: '{$data.appId}', // 必填，公众号的唯一标识
            timestamp: {$data.timestamp}, // 必填，生成签名的时间戳
            nonceStr:'{$data.nonceStr}', // 必填，生成签名的随机串
            signature:'{$data.signature}',// 必填，签名，见附录1
            jsApiList: ['checkJsApi',
                        'onMenuShareTimeline',
                        'onMenuShareAppMessage'] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2
        });
        wx.ready(function(){
            //var id =getQueryString("id");
            wx.onMenuShareAppMessage({
                title: "一只穿云箭,千军万马来相见！",
                desc: "我要抢现金红包,需要朋友们帮助！",
                link: window.conf["link"],
                imgUrl: "{$user.headimgurl}",
                trigger: function (res) {
                  //alert('用户点击发送给朋友');
                },
                success: function (res) {
                  //alert('已分享');

                },
                cancel: function (res) {
                  //alert('已取消');
                },
                fail: function (res) {
                  alert(JSON.stringify(res));
                }
            });
        
            wx.onMenuShareTimeline({
                title: "一只穿云箭,千军万马来相见！",
                link: window.conf["link"],
                imgUrl: "{$user.headimgurl}",
                trigger: function (res) {
                //alert('用户点击分享到朋友圈');
                },
                success: function (res) {
                //alert('已分享');
                },
                cancel: function (res) {
                //alert('已取消');
                },
                fail: function (res) {
                alert(JSON.stringify(res));
                }
            });
        });
        wx.error(function(res){
            // config信息验证失败会执行error函数，如签名过期导致验证失败，具体错误信息可以打开config的debug模式查看，也可以在返回的res参数中查看，对于SPA可以在这里更新签名。
        });	
    </script>
    <script type="text/javascript">
        (function(){
            var V = {};
            V.init = function(){
                var winH = $(document).height() || window.innerHeight;
                var winW = document.body.clientWidth||window.innerWidth;
                //头像
                var aML  = parseInt(winW/640*60); 
                var aW   = parseInt(winW/640*200);
                //分享
                var sW   = parseInt(winW/640*260);

                //昵称
                var nW   = parseInt(winW/640*377);
                var nH   = parseInt(nW/377*53);
                var nML  = parseInt(winW/640*157);
                var nMT  = nH;
                //积分
                var jW   = parseInt(winW/640*377);
                var jH   = parseInt(nW/377*53);
                var jML   = parseInt(winW/640*130);
                var jMT   = nH/2+2;
                //跑道
                var pH   = parseInt(nW/377*93);
                var pMT   = parseInt(nW/377*60);
                //fire
                var fMT  = parseInt(pH/80*8);
                var fH   = parseInt(pH/80*63);
                //飞机
                var planeW = parseInt(winW/640*161);
                //console.log(winH);
                //列表
                var saW   = parseInt(nW/377*56);
                //按钮
                var btnW  = parseInt(winW/640*190);
                var btnH  = parseInt(nW/377*90);
                var btnPL  = parseInt(winW/640*5);
                var btnPT   = parseInt(nW/377*60);

                var wbtnW  = parseInt(winW/640*220);
                var wbtnH  = parseInt(nW/377*100);
                
                var cssNode = document.createTextNode(".avatar{margin-left:"+aML+"px;width:"+aW+"px;height:"+aW+"px} .share{width:"+sW+"px;} .nichen{width:"+nW+"px;height:"+nH+"px;margin-left:"+nML+"px;margin-top:"+nMT+"px;} .nichen span{line-height:"+nH+"px;} .jifen span{line-height:"+nH+"px;} .jifen{width:"+jW+"px;height:"+jH+"px;margin-left:"+jML+"px;margin-top:"+jMT+"px;} .percent{margin-top:"+pMT+"px;} .paodao{height:"+pH+"px;} .small-avatar{width:"+saW+"px} .btn{width:"+btnW+"px;margin-left:"+btnPL+"px;margin-top:"+btnPT+"px;height:"+btnH+"px;} .wo{width:"+wbtnW+"px;height:"+wbtnH+"px;} .fire{height:"+fH+"px;margin-top:"+fMT+"px;width:"+planeW+"px;} .fire img{height:"+fH+"px}"); 
                var style = document.createElement("style"); 
                style.type = "text/css"; 
                style.appendChild(cssNode);
                document.head.appendChild(style);                   
            }
            V.init();
            $(window).resize(function(){
                //alert("ha");
                V.init();
                V.fire();
            });
            V.fire = function(){
                var count = parseInt($("#count").val());
                if (count>=100) {
                    count = 100;
                }
                var winW = document.body.clientWidth||window.innerWidth;
                var planeW = parseInt(winW/640*161);
                var width = parseInt((winW-planeW)/100*count)+planeW; 
                $("#fire").animate({width:width+"px"});                
            }
            V.fire();

            $("#btn").click(function(){
                var userId   = $("#userId").val();
                var friendId = $("#friendId").val();
                var para = {
                    "userId":userId,
                    "friendId":friendId
                };
                $.get("http://wx.vlegend.cn/doJi",para,function(data){
                   
                   if (data == "1") {
                    　  var count = parseInt($("#count").val())+1;
                        $("#count").val(count);
                        $("#num").text(count*50);
                        $("#count").val(count);
                        var jifen = $("#jifen").text();
                        $("#jifen").text(parseInt(jifen)+50);
                        V.fire(); 
                        var img = $("#headPic").val();
                        var li = document.createElement("li");
                        li.innerHTML = "<div class=\"small-avatar\"><img src=\""+img+"\"></div>";
                        $("#aList").append(li);
                        $("#alert").modal('show');
                    }else{
                        $("#mTitle").text("提示");
                        $("#mContent").html("已经点过赞了,明天再继续。只有关注了才能领取奖品哟<img src=\"http://wx.vlegend.cn/Public/ji/guanzhu.png\">");
                        $("#alert").modal('show');
                    }
                });
            });
        })();
	</script>
</body>
</html>