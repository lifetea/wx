/*!
* @license SoundJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011-2013 gskinner.com, inc.
*
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/
this.createjs=this.createjs||{},function(){var b=createjs.SoundJS=createjs.SoundJS||{};b.version="0.6.0",b.buildDate="Thu, 11 Dec 2014 23:32:09 GMT"}(),this.createjs=this.createjs||{},createjs.extend=function(e,d){function f(){this.constructor=e}return f.prototype=d.prototype,e.prototype=new f},this.createjs=this.createjs||{},createjs.promote=function(g,f){var j=g.prototype,i=Object.getPrototypeOf&&Object.getPrototypeOf(j)||j.__proto__;if(i){j[(f+="_")+"constructor"]=i.constructor;for(var h in i){j.hasOwnProperty(h)&&"function"==typeof i[h]&&(j[f+h]=i[h])}}return g},this.createjs=this.createjs||{},createjs.indexOf=function(f,e){for(var h=0,g=f.length;g>h;h++){if(e===f[h]){return h}}return -1},this.createjs=this.createjs||{},function(){createjs.proxy=function(e,d){var f=Array.prototype.slice.call(arguments,2);return function(){return e.apply(d,Array.prototype.slice.call(arguments,0).concat(f))}}}(),this.createjs=this.createjs||{},function(){var e=Object.defineProperty?!0:!1,d={};try{Object.defineProperty(d,"bar",{get:function(){return this._bar},set:function(b){this._bar=b}})}catch(f){e=!1}createjs.definePropertySupported=e}(),this.createjs=this.createjs||{},function(){function d(){throw"BrowserDetect cannot be instantiated"}var c=d.agent=window.navigator.userAgent;d.isWindowPhone=c.indexOf("IEMobile")>-1||c.indexOf("Windows Phone")>-1,d.isFirefox=c.indexOf("Firefox")>-1,d.isOpera=null!=window.opera,d.isChrome=c.indexOf("Chrome")>-1,d.isIOS=(c.indexOf("iPod")>-1||c.indexOf("iPhone")>-1||c.indexOf("iPad")>-1)&&!d.isWindowPhone,d.isAndroid=c.indexOf("Android")>-1&&!d.isWindowPhone,d.isBlackberry=c.indexOf("Blackberry")>-1,createjs.BrowserDetect=d}(),this.createjs=this.createjs||{},function(){function d(){this._listeners=null,this._captureListeners=null}var c=d.prototype;d.initialize=function(b){b.addEventListener=c.addEventListener,b.on=c.on,b.removeEventListener=b.off=c.removeEventListener,b.removeAllEventListeners=c.removeAllEventListeners,b.hasEventListener=c.hasEventListener,b.dispatchEvent=c.dispatchEvent,b._dispatchEvent=c._dispatchEvent,b.willTrigger=c.willTrigger},c.addEventListener=function(g,f,j){var i;i=j?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var h=i[g];return h&&this.removeEventListener(g,f,j),h=i[g],h?h.push(f):i[g]=[f],f},c.on=function(h,g,l,k,j,i){return g.handleEvent&&(l=l||g,g=g.handleEvent),l=l||this,this.addEventListener(h,function(b){g.call(l,b,j),k&&b.remove()},i)},c.removeEventListener=function(i,h,n){var m=n?this._captureListeners:this._listeners;if(m){var l=m[i];if(l){for(var k=0,j=l.length;j>k;k++){if(l[k]==h){1==j?delete m[i]:l.splice(k,1);break}}}}},c.off=c.removeEventListener,c.removeAllEventListeners=function(b){b?(this._listeners&&delete this._listeners[b],this._captureListeners&&delete this._captureListeners[b]):this._listeners=this._captureListeners=null},c.dispatchEvent=function(i){if("string"==typeof i){var h=this._listeners;if(!h||!h[i]){return !1}i=new createjs.Event(i)}else{i.target&&i.clone&&(i=i.clone())}try{i.target=this}catch(n){}if(i.bubbles&&this.parent){for(var m=this,l=[m];m.parent;){l.push(m=m.parent)}var k,j=l.length;for(k=j-1;k>=0&&!i.propagationStopped;k--){l[k]._dispatchEvent(i,1+(0==k))}for(k=1;j>k&&!i.propagationStopped;k++){l[k]._dispatchEvent(i,3)}}else{this._dispatchEvent(i,2)}return i.defaultPrevented},c.hasEventListener=function(f){var e=this._listeners,g=this._captureListeners;return !!(e&&e[f]||g&&g[f])},c.willTrigger=function(f){for(var e=this;e;){if(e.hasEventListener(f)){return !0}e=e.parent}return !1},c.toString=function(){return"[EventDispatcher]"},c._dispatchEvent=function(j,i){var p,o=1==i?this._captureListeners:this._listeners;if(j&&o){var n=o[j.type];if(!n||!(p=n.length)){return}try{j.currentTarget=this}catch(m){}try{j.eventPhase=i}catch(m){}j.removed=!1,n=n.slice();for(var l=0;p>l&&!j.immediatePropagationStopped;l++){var k=n[l];k.handleEvent?k.handleEvent(j):k(j),j.removed&&(this.off(j.type,k,1==i),j.removed=!1)}}},createjs.EventDispatcher=d}(),this.createjs=this.createjs||{},function(){function d(f,e,g){this.type=f,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!g,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var c=d.prototype;c.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},c.stopPropagation=function(){this.propagationStopped=!0},c.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},c.remove=function(){this.removed=!0},c.clone=function(){return new d(this.type,this.bubbles,this.cancelable)},c.set=function(f){for(var e in f){this[e]=f[e]}return this},c.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=d}(),this.createjs=this.createjs||{},function(){function d(f,e,g){this.Event_constructor("error"),this.title=f,this.message=e,this.data=g}var c=createjs.extend(d,createjs.Event);c.clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)},createjs.ErrorEvent=createjs.promote(d,"Event")}(),this.createjs=this.createjs||{},function(){function d(f,e){this.Event_constructor("progress"),this.loaded=f,this.total=null==e?1:e,this.progress=0==e?0:this.loaded/this.total}var c=createjs.extend(d,createjs.Event);c.clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)},createjs.ProgressEvent=createjs.promote(d,"Event")}(window),this.createjs=this.createjs||{},function(){function e(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=createjs.LoadItem.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin="Anonymous",this.loadTimeout=8000}var d=e.prototype={},f=e;f.create=function(a){if("string"==typeof a){var c=new e;return c.src=a,c}if(a instanceof f){return a}if(a instanceof Object){return a}throw new Error("Type not recognized.")},d.set=function(g){for(var c in g){this[c]=g[c]}return this},createjs.LoadItem=f}(),function(){var b={};b.ABSOLUTE_PATT=/^(?:\w+:)?\/{2}/i,b.RELATIVE_PATT=/^[./]*?\//i,b.EXTENSION_PATT=/\/?[^/]+\.(\w{1,5})$/i,b.parseURI=function(a){var h={absolute:!1,relative:!1};if(null==a){return h}var g=a.indexOf("?");g>-1&&(a=a.substr(0,g));var f;return b.ABSOLUTE_PATT.test(a)?h.absolute=!0:b.RELATIVE_PATT.test(a)&&(h.relative=!0),(f=a.match(b.EXTENSION_PATT))&&(h.extension=f[1].toLowerCase()),h},b.formatQueryString=function(f,e){if(null==f){throw new Error("You must specify data.")}var h=[];for(var g in f){h.push(g+"="+escape(f[g]))}return e&&(h=h.concat(e)),h.join("&")},b.buildPath=function(g,f){if(null==f){return g}var j=[],i=g.indexOf("?");if(-1!=i){var h=g.slice(i+1);j=j.concat(h.split("&"))}return -1!=i?g.slice(0,i)+"?"+this._formatQueryString(f,j):g+"?"+this._formatQueryString(f,j)},b.isCrossDomain=function(f){var e=document.createElement("a");e.href=f.src;var h=document.createElement("a");h.href=location.href;var g=""!=e.hostname&&(e.port!=h.port||e.protocol!=h.protocol||e.hostname!=h.hostname);return g},b.isLocal=function(d){var c=document.createElement("a");return c.href=d.src,""==c.hostname&&"file:"==c.protocol},b.isBinary=function(c){switch(c){case createjs.AbstractLoader.IMAGE:case createjs.AbstractLoader.BINARY:return !0;default:return !1}},b.isImageTag=function(c){return c instanceof HTMLImageElement},b.isAudioTag=function(c){return window.HTMLAudioElement?c instanceof HTMLAudioElement:!1},b.isVideoTag=function(c){return window.HTMLVideoElement?c instanceof HTMLVideoElement:void 0},b.isText=function(c){switch(c){case createjs.AbstractLoader.TEXT:case createjs.AbstractLoader.JSON:case createjs.AbstractLoader.MANIFEST:case createjs.AbstractLoader.XML:case createjs.AbstractLoader.CSS:case createjs.AbstractLoader.SVG:case createjs.AbstractLoader.JAVASCRIPT:return !0;default:return !1}},b.getTypeByExtension=function(c){if(null==c){return createjs.AbstractLoader.TEXT}switch(c.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.AbstractLoader.IMAGE;case"ogg":case"mp3":case"webm":return createjs.AbstractLoader.SOUND;case"mp4":case"webm":case"ts":return createjs.AbstractLoader.VIDEO;case"json":return createjs.AbstractLoader.JSON;case"xml":return createjs.AbstractLoader.XML;case"css":return createjs.AbstractLoader.CSS;case"js":return createjs.AbstractLoader.JAVASCRIPT;case"svg":return createjs.AbstractLoader.SVG;default:return createjs.AbstractLoader.TEXT}},createjs.RequestUtils=b}(),this.createjs=this.createjs||{},function(){function e(h,g,i){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=i,this.resultFormatter=null,this._item=h?createjs.LoadItem.create(h):null,this._preferXHR=g,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var d=createjs.extend(e,createjs.EventDispatcher),f=e;f.POST="POST",f.GET="GET",f.BINARY="binary",f.CSS="css",f.IMAGE="image",f.JAVASCRIPT="javascript",f.JSON="json",f.JSONP="jsonp",f.MANIFEST="manifest",f.SOUND="sound",f.VIDEO="video",f.SPRITESHEET="spritesheet",f.SVG="svg",f.TEXT="text",f.XML="xml",d.getItem=function(){return this._item},d.getResult=function(b){return b?this._rawResult:this._result},d.getTag=function(){return this._tag},d.setTag=function(b){this._tag=b},d.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var b=new createjs.Event("initialize");b.loader=this._request,this.dispatchEvent(b),this._request.load()},d.cancel=function(){this.canceled=!0,this.destroy()},d.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},d.getLoadedItems=function(){return this._loadedItems},d._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},d._createTag=function(){return null},d._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},d._sendProgress=function(g){if(!this._isCanceled()){var c=null;"number"==typeof g?(this.progress=g,c=new createjs.ProgressEvent(this.progress)):(c=g,this.progress=g.loaded/g.total,c.progress=this.progress,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(c)}},d._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var b=new createjs.Event("complete");b.rawResult=this._rawResult,null!=this._result&&(b.result=this._result),this.dispatchEvent(b)}},d._sendError=function(b){!this._isCanceled()&&this.hasEventListener("error")&&(null==b&&(b=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(b))},d._isCanceled=function(){return null==window.createjs||this.canceled?!0:!1},d.resultFormatter=null,d.handleEvent=function(h){switch(h.type){case"complete":this._rawResult=h.target._response;var g=this.resultFormatter&&this.resultFormatter(this),i=this;g instanceof Function?g(function(b){i._result=b,i._sendComplete()}):(this._result=g||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(h);break;case"error":this._sendError(h);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(h.type)}},d.buildPath=function(g,c){return createjs.RequestUtils.buildPath(g,c)},d.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=createjs.promote(e,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){function d(f,e,g){this.AbstractLoader_constructor(f,e,g),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src"}var c=createjs.extend(d,createjs.AbstractLoader);c.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},c._createTag=function(){},c._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},c._formatResult=function(b){return this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR&&(b.getTag().src=b.getResult(!0)),b.getTag()},createjs.AbstractMediaLoader=createjs.promote(d,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){var d=function(b){this._item=b},c=createjs.extend(d,createjs.EventDispatcher);c.load=function(){},c.destroy=function(){},c.cancel=function(){},createjs.AbstractRequest=createjs.promote(d,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){function d(f,e,g){this.AbstractRequest_constructor(f),this._tag=e,this._tagSrcAttribute=g,this._loadedHandler=createjs.proxy(this._handleTagComplete,this),this._addedToDOM=!1,this._startTagVisibility=null}var c=createjs.extend(d,createjs.AbstractRequest);c.load=function(){null==this._tag.parentNode&&(window.document.body.appendChild(this._tag),this._addedToDOM=!0),this._tag.onload=createjs.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this);var b=new createjs.Event("initialize");b.loader=this._tag,this.dispatchEvent(b),this._hideTag(),this._tag[this._tagSrcAttribute]=this._item.src},c.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},c._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var b=this._tag;("loaded"==b.readyState||"complete"==b.readyState)&&this._handleTagComplete()},c._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this._showTag(),this.dispatchEvent("complete")},c._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._addedToDOM&&null!=this._tag.parentNode&&this._tag.parentNode.removeChild(this._tag)},c._hideTag=function(){this._startTagVisibility=this._tag.style.visibility,this._tag.style.visibility="hidden"},c._showTag=function(){this._tag.style.visibility=this._startTagVisibility},c._handleStalled=function(){},createjs.TagRequest=createjs.promote(d,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){function d(f,e,g){this.AbstractRequest_constructor(f),this._tag=e,this._tagSrcAttribute=g,this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var c=createjs.extend(d,createjs.TagRequest);c.load=function(){this._tag.onstalled=createjs.proxy(this._handleStalled,this),this._tag.onprogress=createjs.proxy(this._handleProgress,this),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},c._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var b=this._tag;("loaded"==b.readyState||"complete"==b.readyState)&&this._handleTagComplete()},c._handleStalled=function(){},c._handleProgress=function(f){if(f&&!(f.loaded>0&&0==f.total)){var e=new createjs.ProgressEvent(f.loaded,f.total);this.dispatchEvent(e)}},c._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._tag.onprogress=null,this.TagRequest__clean()},createjs.MediaTagRequest=createjs.promote(d,"TagRequest")}(),this.createjs=this.createjs||{},function(){function d(b){this.AbstractRequest_constructor(b),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this),this._handleProgressProxy=createjs.proxy(this._handleProgress,this),this._handleAbortProxy=createjs.proxy(this._handleAbort,this),this._handleErrorProxy=createjs.proxy(this._handleError,this),this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this),this._handleLoadProxy=createjs.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this),!this._createXHR(b)}var c=createjs.extend(d,createjs.AbstractRequest);d.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c.getResult=function(b){return b&&this._rawResponse?this._rawResponse:this._response},c.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},c.load=function(){if(null==this._request){return void this._handleError()}this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values&&this._item.method!=createjs.AbstractLoader.GET?this._item.method==createjs.AbstractLoader.POST&&this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)):this._request.send()}catch(b){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,b))}},c.setResponseType=function(b){this._request.responseType=b},c.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},c.getResponseHeader=function(b){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(b):null},c._handleProgress=function(f){if(f&&!(f.loaded>0&&0==f.total)){var e=new createjs.ProgressEvent(f.loaded,f.total);this.dispatchEvent(e)}},c._handleLoadStart=function(){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},c._handleAbort=function(b){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,b))},c._handleError=function(b){this._clean(),this.dispatchEvent(new createjs.ErrorEvent(b.message))},c._handleReadyStateChange=function(){4==this._request.readyState&&this._handleLoad()},c._handleLoad=function(){if(!this.loaded){this.loaded=!0;var b=this._checkError();if(b){return void this._handleError(b)}this._response=this._getResponse(),this._clean(),this.dispatchEvent(new createjs.Event("complete"))}},c._handleTimeout=function(b){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,b))},c._checkError=function(){var b=parseInt(this._request.status);switch(b){case 404:case 0:return new Error(b)}return null},c._getResponse=function(){if(null!=this._response){return this._response}if(null!=this._request.response){return this._request.response}try{if(null!=this._request.responseText){return this._request.responseText}}catch(b){}try{if(null!=this._request.responseXML){return this._request.responseXML}}catch(b){}return null},c._createXHR=function(r){var q=createjs.RequestUtils.isCrossDomain(r),p={},o=null;if(window.XMLHttpRequest){o=new XMLHttpRequest,q&&void 0===o.withCredentials&&window.XDomainRequest&&(o=new XDomainRequest)}else{for(var n=0,m=s.ACTIVEX_VERSIONS.length;m>n;n++){s.ACTIVEX_VERSIONS[n];try{o=new ActiveXObject(axVersions);break}catch(l){}}if(null==o){return !1}}r.mimeType&&o.overrideMimeType&&o.overrideMimeType(r.mimeType),this._xhrLevel="string"==typeof o.responseType?2:1;var k=null;if(k=r.method==createjs.AbstractLoader.GET?createjs.RequestUtils.buildPath(r.src,r.values):r.src,o.open(r.method||createjs.AbstractLoader.GET,k,!0),q&&o instanceof XMLHttpRequest&&1==this._xhrLevel&&(p.Origin=location.origin),r.values&&r.method==createjs.AbstractLoader.POST&&(p["Content-Type"]="application/x-www-form-urlencoded"),q||p["X-Requested-With"]||(p["X-Requested-With"]="XMLHttpRequest"),r.headers){for(var j in r.headers){p[j]=r.headers[j]}}for(j in p){o.setRequestHeader(j,p[j])}return o instanceof XMLHttpRequest&&void 0!==r.withCredentials&&(o.withCredentials=r.withCredentials),this._request=o,!0},c._clean=function(){clearTimeout(this._loadTimeout),this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)},c.toString=function(){return"[PreloadJS XHRRequest]"},createjs.XHRRequest=createjs.promote(d,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){function e(g,c){this.AbstractMediaLoader_constructor(g,c,createjs.AbstractLoader.SOUND),createjs.RequestUtils.isAudioTag(g)?this._tag=g:createjs.RequestUtils.isAudioTag(g.src)?this._tag=g:createjs.RequestUtils.isAudioTag(g.tag)&&(this._tag=createjs.RequestUtils.isAudioTag(g)?g:g.src),null!=this._tag&&(this._preferXHR=!1)}var d=createjs.extend(e,createjs.AbstractMediaLoader),f=e;f.canLoadItem=function(b){return b.type==createjs.AbstractLoader.SOUND},d._createTag=function(g){var c=document.createElement("audio");return c.autoplay=!1,c.preload="none",c.src=g,c},createjs.SoundLoader=createjs.promote(e,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){function f(){throw"Sound cannot be instantiated"}function e(d,c){this.init(d,c)}var h=f;h.INTERRUPT_ANY="any",h.INTERRUPT_EARLY="early",h.INTERRUPT_LATE="late",h.INTERRUPT_NONE="none",h.PLAY_INITED="playInited",h.PLAY_SUCCEEDED="playSucceeded",h.PLAY_INTERRUPTED="playInterrupted",h.PLAY_FINISHED="playFinished",h.PLAY_FAILED="playFailed",h.SUPPORTED_EXTENSIONS=["mp3","ogg","mpeg","wav","m4a","mp4","aiff","wma","mid"],h.EXTENSION_MAP={m4a:"mp4"},h.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([/.]*?(?:[^?]+)?\/)?((?:[^/?]+)\.(\w+))(?:\?(\S+)?)?$/,h.defaultInterruptBehavior=h.INTERRUPT_NONE,h.alternateExtensions=[],h.activePlugin=null,h._pluginsRegistered=!1,h._lastID=0,h._masterVolume=1,h._masterMute=!1,h._instances=[],h._idHash={},h._preloadHash={},h.addEventListener=null,h.removeEventListener=null,h.removeAllEventListeners=null,h.dispatchEvent=null,h.hasEventListener=null,h._listeners=null,createjs.EventDispatcher.initialize(h),h.getPreloadHandlers=function(){return{callback:createjs.proxy(h.initLoad,h),types:["sound"],extensions:h.SUPPORTED_EXTENSIONS}},h._handleLoadComplete=function(i){var c=i.target.getItem().src;if(h._preloadHash[c]){for(var l=0,k=h._preloadHash[c].length;k>l;l++){var j=h._preloadHash[c][l];if(h._preloadHash[c][l]=!0,h.hasEventListener("fileload")){var i=new createjs.Event("fileload");i.src=j.src,i.id=j.id,i.data=j.data,i.sprite=j.sprite,h.dispatchEvent(i)}}}},h._handleLoadError=function(i){var c=i.target.getItem().src;if(h._preloadHash[c]){for(var l=0,k=h._preloadHash[c].length;k>l;l++){var j=h._preloadHash[c][l];if(h._preloadHash[c][l]=!1,h.hasEventListener("fileerror")){var i=new createjs.Event("fileerror");i.src=j.src,i.id=j.id,i.data=j.data,i.sprite=j.sprite,h.dispatchEvent(i)}}}},h._registerPlugin=function(b){return b.isSupported()?(h.activePlugin=new b,!0):!1},h.registerPlugins=function(i){h._pluginsRegistered=!0;for(var c=0,j=i.length;j>c;c++){if(h._registerPlugin(i[c])){return !0}}return !1},h.initializeDefaultPlugins=function(){return null!=h.activePlugin?!0:h._pluginsRegistered?!1:h.registerPlugins([createjs.WebAudioPlugin,createjs.HTMLAudioPlugin])?!0:!1},h.isReady=function(){return null!=h.activePlugin},h.getCapabilities=function(){return null==h.activePlugin?null:h.activePlugin._capabilities},h.getCapability=function(b){return null==h.activePlugin?null:h.activePlugin._capabilities[b]},h.initLoad=function(b){return h._registerSound(b)},h._registerSound=function(b){if(!h.initializeDefaultPlugins()){return !1}var n=h._parsePath(b.src);if(null==n){return !1}b.src=n.src,b.type="sound";var m=b.data,l=h.activePlugin.defaultNumChannels||null;if(null!=m&&(isNaN(m.channels)?isNaN(m)||(l=parseInt(m)):l=parseInt(m.channels),m.audioSprite)){for(var k,j=m.audioSprite.length;j--;){k=m.audioSprite[j],h._idHash[k.id]={src:b.src,startTime:parseInt(k.startTime),duration:parseInt(k.duration)}}}null!=b.id&&(h._idHash[b.id]={src:b.src});var c=h.activePlugin.register(b,l);return e.create(b.src,l),null!=m&&isNaN(m)?b.data.channels=l||e.maxPerChannel():b.data=l||e.maxPerChannel(),c.type&&(b.type=c.type),c},h.registerSound=function(i,c,m,l){var k={src:i,id:c,data:m};i instanceof Object&&(l=c,k=i),k=createjs.LoadItem.create(k),null!=l&&(k.src=l+i);var j=h._registerSound(k);if(!j){return !1}if(h._preloadHash[k.src]||(h._preloadHash[k.src]=[]),h._preloadHash[k.src].push(k),1==h._preloadHash[k.src].length){j.on("complete",createjs.proxy(this._handleLoadComplete,this)),j.on("error",createjs.proxy(this._handleLoadError,this)),h.activePlugin.preload(j)}else{if(1==h._preloadHash[k.src][0]){return !0}}return k},h.registerSounds=function(j,i){var m=[];j.path&&(i?i+=j.path:i=j.path);for(var l=0,k=j.length;k>l;l++){m[l]=createjs.Sound.registerSound(j[l].src,j[l].id,j[l].data,i)}return m},h.registerManifest=function(i,d){try{console.log("createjs.Sound.registerManifest is deprecated, please use createjs.Sound.registerSounds.")}catch(j){}return this.registerSounds(i,d)},h.removeSound=function(b,j){if(null==h.activePlugin){return !1}b instanceof Object&&(b=b.src),b=h._getSrcById(b).src,null!=j&&(b=j+b);var i=h._parsePath(b);if(null==i){return !1}b=i.src;for(var c in h._idHash){h._idHash[c].src==b&&delete h._idHash[c]}return e.removeSrc(b),delete h._preloadHash[b],h.activePlugin.removeSound(b),!0},h.removeSounds=function(j,i){var m=[];j.path&&(i?i+=j.path:i=j.path);for(var l=0,k=j.length;k>l;l++){m[l]=createjs.Sound.removeSound(j[l].src,i)}return m},h.removeManifest=function(i,c){try{console.log("createjs.Sound.removeManifest is deprecated, please use createjs.Sound.removeSounds.")}catch(j){}return h.removeSounds(i,c)},h.removeAllSounds=function(){h._idHash={},h._preloadHash={},e.removeAll(),h.activePlugin&&h.activePlugin.removeAllSounds()},h.loadComplete=function(d){if(!h.isReady()){return !1}var c=h._parsePath(d);return d=c?h._getSrcById(c.src).src:h._getSrcById(d).src,1==h._preloadHash[d][0]},h._parsePath=function(i){"string"!=typeof i&&(i=i.toString());var c=i.match(h.FILE_PATTERN);if(null==c){return !1}for(var n=c[4],m=c[5],l=h.getCapabilities(),k=0;!l[m];){if(m=h.alternateExtensions[k++],k>h.alternateExtensions.length){return null}}i=i.replace("."+c[5],"."+m);var j={name:n,src:i,extension:m};return j},h.play=function(w,v,u,t,r,q,p,o,n){v instanceof Object&&(u=v.delay,t=v.offset,r=v.loop,q=v.volume,p=v.pan,o=v.startTime,n=v.duration,v=v.interrupt);var m=h.createInstance(w,o,n),c=h._playInstance(m,v,u,t,r,q,p);return c||m._playFailed(),m},h.createInstance=function(b,k,j){if(!h.initializeDefaultPlugins()){return new createjs.DefaultSoundInstance(b,k,j)}b=h._getSrcById(b);var i=h._parsePath(b.src),c=null;return null!=i&&null!=i.src?(e.create(i.src),null==k&&(k=b.startTime),c=h.activePlugin.create(i.src,k,j||b.duration)):c=new createjs.DefaultSoundInstance(b,k,j),c.uniqueId=h._lastID++,c},h.setVolume=function(i){if(null==Number(i)){return !1}if(i=Math.max(0,Math.min(1,i)),h._masterVolume=i,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(i)){for(var c=this._instances,k=0,j=c.length;j>k;k++){c[k].setMasterVolume(i)}}},h.getVolume=function(){return h._masterVolume},h.setMute=function(j){if(null==j){return !1}if(this._masterMute=j,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(j)){for(var i=this._instances,l=0,k=i.length;k>l;l++){i[l].setMasterMute(j)}}return !0},h.getMute=function(){return this._masterMute},h.stop=function(){for(var d=this._instances,c=d.length;c--;){d[c].stop()}},h._playInstance=function(r,q,p,o,n,m,l){if(q instanceof Object&&(p=q.delay,o=q.offset,n=q.loop,m=q.volume,l=q.pan,q=q.interrupt),q=q||h.defaultInterruptBehavior,null==p&&(p=0),null==o&&(o=r.getPosition()),null==n&&(n=r.loop),null==m&&(m=r.volume),null==l&&(l=r.pan),0==p){var k=h._beginPlaying(r,q,o,n,m,l);if(!k){return !1}}else{var c=setTimeout(function(){h._beginPlaying(r,q,o,n,m,l)},p);r.delayTimeoutId=c}return this._instances.push(r),!0},h._beginPlaying=function(b,p,o,n,m,l){if(!e.add(b,p)){return !1}var k=b._beginPlaying(o,n,m,l);if(!k){var j=createjs.indexOf(this._instances,b);return j>-1&&this._instances.splice(j,1),!1}return !0},h._getSrcById=function(b){return h._idHash[b]||{src:b}},h._playFinished=function(b){e.remove(b);var d=createjs.indexOf(this._instances,b);d>-1&&this._instances.splice(d,1)},createjs.Sound=f,e.channels={},e.create=function(b,j){var i=e.get(b);return null==i?(e.channels[b]=new e(b,j),!0):!1},e.removeSrc=function(b){var d=e.get(b);return null==d?!1:(d._removeAll(),delete e.channels[b],!0)},e.removeAll=function(){for(var b in e.channels){e.channels[b]._removeAll()}e.channels={}},e.add=function(b,j){var i=e.get(b.src);return null==i?!1:i._add(b,j)},e.remove=function(b){var d=e.get(b.src);return null==d?!1:(d._remove(b),!0)},e.maxPerChannel=function(){return g.maxDefault},e.get=function(b){return e.channels[b]};var g=e.prototype;g.constructor=e,g.src=null,g.max=null,g.maxDefault=100,g.length=0,g.init=function(d,c){this.src=d,this.max=c||this.maxDefault,-1==this.max&&(this.max=this.maxDefault),this._instances=[]},g._get=function(b){return this._instances[b]},g._add=function(d,c){return this._getSlot(c,d)?(this._instances.push(d),this.length++,!0):!1},g._remove=function(d){var c=createjs.indexOf(this._instances,d);return -1==c?!1:(this._instances.splice(c,1),this.length--,!0)},g._removeAll=function(){for(var b=this.length-1;b>=0;b--){this._instances[b].stop()}},g._getSlot=function(a){var l,k;if(a!=f.INTERRUPT_NONE&&(k=this._get(0),null==k)){return !0}for(var j=0,i=this.max;i>j;j++){if(l=this._get(j),null==l){return !0}if(l.playState==f.PLAY_FINISHED||l.playState==f.PLAY_INTERRUPTED||l.playState==f.PLAY_FAILED){k=l;break}a!=f.INTERRUPT_NONE&&(a==f.INTERRUPT_EARLY&&l.getPosition()<k.getPosition()||a==f.INTERRUPT_LATE&&l.getPosition()>k.getPosition())&&(k=l)}return null!=k?(k._interrupt(),this._remove(k),!0):!1},g.toString=function(){return"[Sound SoundChannel]"}}(),this.createjs=this.createjs||{},function(){var d=function(f,e,h,g){this.EventDispatcher_constructor(),this.src=f,this.uniqueId=-1,this.playState=null,this.delayTimeoutId=null,this._startTime=Math.max(0,e||0),this._volume=1,createjs.definePropertySupported&&Object.defineProperty(this,"volume",{get:this.getVolume,set:this.setVolume}),this._pan=0,createjs.definePropertySupported&&Object.defineProperty(this,"pan",{get:this.getPan,set:this.setPan}),this._duration=Math.max(0,h||0),createjs.definePropertySupported&&Object.defineProperty(this,"duration",{get:this.getDuration,set:this.setDuration}),this._playbackResource=null,createjs.definePropertySupported&&Object.defineProperty(this,"playbackResource",{get:this.getPlaybackResource,set:this.setPlaybackResource}),g!==!1&&g!==!0&&this.setPlaybackResource(g),this._position=0,createjs.definePropertySupported&&Object.defineProperty(this,"position",{get:this.getPosition,set:this.setPosition}),this._loop=0,createjs.definePropertySupported&&Object.defineProperty(this,"loop",{get:this.getLoop,set:this.setLoop}),this._muted=!1,createjs.definePropertySupported&&Object.defineProperty(this,"muted",{get:this.getMuted,set:this.setMuted}),this._paused=!1,createjs.definePropertySupported&&Object.defineProperty(this,"paused",{get:this.getPaused,set:this.setPaused})},c=createjs.extend(d,createjs.EventDispatcher);c.play=function(h,g,l,k,j,i){return this.playState==createjs.Sound.PLAY_SUCCEEDED?(h instanceof Object&&(l=h.offset,k=h.loop,j=h.volume,i=h.pan),null!=l&&this.setPosition(l),null!=k&&this.setLoop(k),null!=j&&this.setVolume(j),null!=i&&this.setPan(i),void (this._paused&&this.setPaused(!1))):(this._cleanUp(),createjs.Sound._playInstance(this,h,g,l,k,j,i),this)},c.pause=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED?!1:(this.setPaused(!0),!0)},c.resume=function(){return this._paused?(this.setPaused(!1),!0):!1},c.stop=function(){return this._position=0,this._paused=!1,this._handleStop(),this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this},c.destroy=function(){this._cleanUp(),this.src=null,this.playbackResource=null,this.removeAllEventListeners()},c.toString=function(){return"[AbstractSoundInstance]"},c.getPaused=function(){return this._paused},c.setPaused=function(b){return b!==!0&&b!==!1||this._paused==b||1==b&&this.playState!=createjs.Sound.PLAY_SUCCEEDED?void 0:(this._paused=b,b?this._pause():this._resume(),clearTimeout(this.delayTimeoutId),this)},c.setVolume=function(b){return b==this._volume?this:(this._volume=Math.max(0,Math.min(1,b)),this._muted||this._updateVolume(),this)},c.getVolume=function(){return this._volume},c.setMute=function(b){this.setMuted(b)},c.getMute=function(){return this._muted},c.setMuted=function(b){return b===!0||b===!1?(this._muted=b,this._updateVolume(),this):void 0},c.getMuted=function(){return this._muted},c.setPan=function(b){return b==this._pan?this:(this._pan=Math.max(-1,Math.min(1,b)),this._updatePan(),this)},c.getPan=function(){return this._pan},c.getPosition=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED?this._position:this._calculateCurrentPosition()},c.setPosition=function(b){return this._position=Math.max(0,b),this.playState==createjs.Sound.PLAY_SUCCEEDED&&this._updatePosition(),this},c.getDuration=function(){return this._duration},c.setDuration=function(b){return b==this._duration?this:(this._duration=Math.max(0,b||0),this._updateDuration(),this)},c.setPlaybackResource=function(b){return this._playbackResource=b,0==this._duration&&this._setDurationFromSource(),this},c.getPlaybackResource=function(){return this._playbackResource},c.getLoop=function(){return this._loop},c.setLoop=function(b){null!=this._playbackResource&&(0!=this._loop&&0==b&&this._removeLooping(b),0==this._loop&&0!=b&&this._addLooping(b)),this._loop=b},c._sendEvent=function(f){var e=new createjs.Event(f);this.dispatchEvent(e)},c._cleanUp=function(){clearTimeout(this.delayTimeoutId),this._handleCleanUp(),this._paused=!1,createjs.Sound._playFinished(this)},c._interrupt=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_INTERRUPTED,this._sendEvent("interrupted")},c._beginPlaying=function(f,e,h,g){return this.setPosition(f),this.setLoop(e),this.setVolume(h),this.setPan(g),null!=this._playbackResource&&this._position<this._duration?(this._paused=!1,this._handleSoundReady(),this.playState=createjs.Sound.PLAY_SUCCEEDED,this._sendEvent("succeeded"),!0):(this._playFailed(),!1)},c._playFailed=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_FAILED,this._sendEvent("failed")},c._handleSoundComplete=function(){return this._position=0,0!=this._loop?(this._loop--,this._handleLoop(),void this._sendEvent("loop")):(this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,void this._sendEvent("complete"))},c._handleSoundReady=function(){},c._updateVolume=function(){},c._updatePan=function(){},c._updateDuration=function(){},c._setDurationFromSource=function(){},c._calculateCurrentPosition=function(){},c._updatePosition=function(){},c._removeLooping=function(){},c._addLooping=function(){},c._pause=function(){},c._resume=function(){},c._handleStop=function(){},c._handleCleanUp=function(){},c._handleLoop=function(){},createjs.AbstractSoundInstance=createjs.promote(d,"EventDispatcher"),createjs.DefaultSoundInstance=createjs.AbstractSoundInstance}(),this.createjs=this.createjs||{},function(){var d=function(){this._capabilities=null,this._loaders={},this._audioSources={},this._soundInstances={},this._loaderClass,this._soundInstanceClass},c=d.prototype;d._capabilities=null,d.isSupported=function(){return !0},c.register=function(f){if(this._audioSources[f.src]=!0,this._soundInstances[f.src]=[],this._loaders[f.src]){return this._loaders[f.src]}var e=new this._loaderClass(f);return e.on("complete",createjs.proxy(this._handlePreloadComplete,this)),this._loaders[f.src]=e,e},c.preload=function(b){b.on("error",createjs.proxy(this._handlePreloadError,this)),b.load()},c.isPreloadStarted=function(b){return null!=this._audioSources[b]},c.isPreloadComplete=function(b){return !(null==this._audioSources[b]||1==this._audioSources[b])},c.removeSound=function(f){if(this._soundInstances[f]){for(var e=this._soundInstances[f].length;e--;){var g=this._soundInstances[f][e];g.destroy()}delete this._soundInstances[f],delete this._audioSources[f],this._loaders[f]&&this._loaders[f].destroy(),delete this._loaders[f]}},c.removeAllSounds=function(){for(var b in this._audioSources){this.removeSound(b)}},c.create=function(f,e,h){this.isPreloadStarted(f)||this.preload(this.register(f));var g=new this._soundInstanceClass(f,e,h,this._audioSources[f]);return this._soundInstances[f].push(g),g},c.setVolume=function(b){return this._volume=b,this._updateVolume(),!0},c.getVolume=function(){return this._volume},c.setMute=function(){return this._updateVolume(),!0},c.toString=function(){return"[AbstractPlugin]"},c._handlePreloadComplete=function(g){var f=g.target.getItem().src;this._audioSources[f]=g.result;for(var j=0,i=this._soundInstances[f].length;i>j;j++){var h=this._soundInstances[f][j];h.setPlaybackResource(this._audioSources[f])}},c._handlePreloadError=function(){},c._updateVolume=function(){},createjs.AbstractPlugin=d}(),this.createjs=this.createjs||{},function(){function d(b){this.AbstractLoader_constructor(b,!0,createjs.AbstractLoader.SOUND)}var c=createjs.extend(d,createjs.AbstractLoader);d.context=null,c.toString=function(){return"[WebAudioLoader]"},c._createRequest=function(){this._request=new createjs.XHRRequest(this._item,!1),this._request.setResponseType("arraybuffer")},c._sendComplete=function(){d.context.decodeAudioData(this._rawResult,createjs.proxy(this._handleAudioDecoded,this),createjs.proxy(this._handleError,this))},c._handleAudioDecoded=function(b){this._result=b,this.AbstractLoader__sendComplete()},createjs.WebAudioLoader=createjs.promote(d,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function e(g,c,i,h){this.AbstractSoundInstance_constructor(g,c,i,h),this.gainNode=f.context.createGain(),this.panNode=f.context.createPanner(),this.panNode.panningModel=f._panningModel,this.panNode.connect(this.gainNode),this.sourceNode=null,this._soundCompleteTimeout=null,this._sourceNodeNext=null,this._playbackStartTime=0,this._endedHandler=createjs.proxy(this._handleSoundComplete,this)}var d=createjs.extend(e,createjs.AbstractSoundInstance),f=e;f.context=null,f.destinationNode=null,f._panningModel="equalpower",d.destroy=function(){this.AbstractSoundInstance_destroy(),this.panNode.disconnect(0),this.panNode=null,this.gainNode.disconnect(0),this.gainNode=null},d.toString=function(){return"[WebAudioSoundInstance]"},d._updatePan=function(){this.panNode.setPosition(this._pan,0,-0.5)},d._removeLooping=function(){this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)},d._addLooping=function(){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},d._setDurationFromSource=function(){this._duration=1000*this.playbackResource.duration},d._handleCleanUp=function(){this.sourceNode&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout),this._playbackStartTime=0},d._cleanUpAudioNode=function(b){return b&&(b.stop(0),b.disconnect(0),b=null),b},d._handleSoundReady=function(){this.gainNode.connect(f.destinationNode);var g=0.001*this._duration,c=0.001*this._position;this.sourceNode=this._createAndPlayAudioNode(f.context.currentTime-g,c),this._playbackStartTime=this.sourceNode.startTime-c,this._soundCompleteTimeout=setTimeout(this._endedHandler,1000*(g-c)),0!=this._loop&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},d._createAndPlayAudioNode=function(g,c){var i=f.context.createBufferSource();i.buffer=this.playbackResource,i.connect(this.panNode);var h=0.001*this._duration;return i.startTime=g+h,i.start(i.startTime,c+0.001*this._startTime,h-c),i},d._pause=function(){this._position=1000*(f.context.currentTime-this._playbackStartTime),this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout)},d._resume=function(){this._handleSoundReady()},d._updateVolume=function(){var b=this._muted?0:this._volume;b!=this.gainNode.gain.value&&(this.gainNode.gain.value=b)},d._calculateCurrentPosition=function(){return 1000*(f.context.currentTime-this._playbackStartTime)},d._updatePosition=function(){this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),clearTimeout(this._soundCompleteTimeout),this._paused||this._handleSoundReady()},d._handleLoop=function(){this._cleanUpAudioNode(this.sourceNode),this.sourceNode=this._sourceNodeNext,this._playbackStartTime=this.sourceNode.startTime,this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0),this._soundCompleteTimeout=setTimeout(this._endedHandler,this._duration)},d._updateDuration=function(){this._pause(),this._resume()},createjs.WebAudioSoundInstance=createjs.promote(e,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){function e(){this.AbstractPlugin_constructor(),this._panningModel=f._panningModel,this._volume=1,this.context=f.context,this.dynamicsCompressorNode=this.context.createDynamicsCompressor(),this.dynamicsCompressorNode.connect(this.context.destination),this.gainNode=this.context.createGain(),this.gainNode.connect(this.dynamicsCompressorNode),createjs.WebAudioSoundInstance.destinationNode=this.gainNode,this._capabilities=f._capabilities,this._loaderClass=createjs.WebAudioLoader,this._soundInstanceClass=createjs.WebAudioSoundInstance,this._addPropsToClasses()}var d=createjs.extend(e,createjs.AbstractPlugin),f=e;f._capabilities=null,f._panningModel="equalpower",f.context=null,f.isSupported=function(){var b=createjs.BrowserDetect.isIOS||createjs.BrowserDetect.isAndroid||createjs.BrowserDetect.isBlackberry;return"file:"!=location.protocol||b||this._isFileXHRSupported()?(f._generateCapabilities(),null==f.context?!1:!0):!1},f.playEmptySound=function(){var b=f.context.createBufferSource();b.buffer=f.context.createBuffer(1,1,22050),b.connect(f.context.destination),b.start(0,0,0)},f._isFileXHRSupported=function(){var h=!0,g=new XMLHttpRequest;try{g.open("GET","WebAudioPluginTest.fail",!1)}catch(i){return h=!1}g.onerror=function(){h=!1},g.onload=function(){h=404==this.status||200==this.status||0==this.status&&""!=this.response};try{g.send()}catch(i){h=!1}return h},f._generateCapabilities=function(){if(null==f._capabilities){var i=document.createElement("audio");if(null==i.canPlayType){return null}if(null==f.context){if(window.AudioContext){f.context=new AudioContext}else{if(!window.webkitAudioContext){return null}f.context=new webkitAudioContext}}f._compatibilitySetUp(),f.playEmptySound(),f._capabilities={panning:!0,volume:!0,tracks:-1};for(var c=createjs.Sound.SUPPORTED_EXTENSIONS,n=createjs.Sound.EXTENSION_MAP,m=0,l=c.length;l>m;m++){var k=c[m],j=n[k]||k;f._capabilities[k]="no"!=i.canPlayType("audio/"+k)&&""!=i.canPlayType("audio/"+k)||"no"!=i.canPlayType("audio/"+j)&&""!=i.canPlayType("audio/"+j)}f.context.destination.numberOfChannels<2&&(f._capabilities.panning=!1)}},f._compatibilitySetUp=function(){if(f._panningModel="equalpower",!f.context.createGain){f.context.createGain=f.context.createGainNode;var b=f.context.createBufferSource();b.__proto__.start=b.__proto__.noteGrainOn,b.__proto__.stop=b.__proto__.noteOff,f._panningModel=0}},d.toString=function(){return"[WebAudioPlugin]"},d._addPropsToClasses=function(){var b=this._soundInstanceClass;b.context=this.context,b.destinationNode=this.gainNode,b._panningModel=this._panningModel,this._loaderClass.context=this.context},d._updateVolume=function(){var b=createjs.Sound._masterMute?0:this._volume;b!=this.gainNode.gain.value&&(this.gainNode.gain.value=b)},createjs.WebAudioPlugin=createjs.promote(e,"AbstractPlugin")}(),this.createjs=this.createjs||{},function(){function e(b){this.src=b,this.length=0,this.available=0,this.tags=[],this.duration=0}var d=e.prototype;d.constructor=e;var f=e;f.tags={},f.get=function(a){var c=f.tags[a];return null==c&&(c=f.tags[a]=new e(a)),c},f.remove=function(g){var c=f.tags[g];return null==c?!1:(c.removeAll(),delete f.tags[g],!0)},f.getInstance=function(g){var c=f.tags[g];return null==c?null:c.get()},f.setInstance=function(g,c){var h=f.tags[g];return null==h?null:h.set(c)},f.getDuration=function(g){var c=f.tags[g];return null==c?0:c.getDuration()},d.add=function(b){this.tags.push(b),this.length++,this.available++},d.removeAll=function(){for(var b;this.length--;){b=this.tags[this.length],b.parentNode&&b.parentNode.removeChild(b),delete this.tags[this.length]}this.src=null,this.tags.length=0},d.get=function(){if(0==this.tags.length){return null}this.available=this.tags.length;var b=this.tags.pop();return null==b.parentNode&&document.body.appendChild(b),b},d.set=function(g){var c=createjs.indexOf(this.tags,g);-1==c&&this.tags.push(g),this.available=this.tags.length},d.getDuration=function(){return this.duration||(this.duration=1000*this.tags[this.tags.length-1].duration),this.duration},d.toString=function(){return"[HTMLAudioTagPool]"},createjs.HTMLAudioTagPool=e}(),this.createjs=this.createjs||{},function(){function d(f,e,h,g){this.AbstractSoundInstance_constructor(f,e,h,g),this._audioSpriteStopTime=null,this._delayTimeoutId=null,this._endedHandler=createjs.proxy(this._handleSoundComplete,this),this._readyHandler=createjs.proxy(this._handleTagReady,this),this._stalledHandler=createjs.proxy(this.playFailed,this),this._audioSpriteEndHandler=createjs.proxy(this._handleAudioSpriteLoop,this),this._loopHandler=createjs.proxy(this._handleSoundComplete,this),h?this._audioSpriteStopTime=0.001*(e+h):this._duration=createjs.HTMLAudioTagPool.getDuration(this.src)}var c=createjs.extend(d,createjs.AbstractSoundInstance);c.setMasterVolume=function(){this._updateVolume()},c.setMasterMute=function(){this._updateVolume()},c.toString=function(){return"[HTMLAudioSoundInstance]"},c._removeLooping=function(){null!=this._playbackResource&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},c._addLooping=function(){null==this._playbackResource||this._audioSpriteStopTime||(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)},c._handleCleanUp=function(){var f=this._playbackResource;if(null!=f){f.pause(),f.loop=!1,f.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),f.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),f.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),f.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),f.removeEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1);try{f.currentTime=this._startTime}catch(e){}createjs.HTMLAudioTagPool.setInstance(this.src,f),this._playbackResource=null}},c._beginPlaying=function(f,e,h,g){return this._playbackResource=createjs.HTMLAudioTagPool.getInstance(this.src),this.AbstractSoundInstance__beginPlaying(f,e,h,g)},c._handleSoundReady=function(){if(4!==this._playbackResource.readyState){var b=this._playbackResource;return b.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),b.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),b.preload="auto",void b.load()}this._updateVolume(),this._playbackResource.currentTime=0.001*(this._startTime+this._position),this._audioSpriteStopTime?this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1):(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),0!=this._loop&&(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)),this._playbackResource.play()},c._handleTagReady=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),this._handleSoundReady()},c._pause=function(){this._playbackResource.pause()},c._resume=function(){this._playbackResource.play()},c._updateVolume=function(){if(null!=this._playbackResource){var b=this._muted||createjs.Sound._masterMute?0:this._volume*createjs.Sound._masterVolume;b!=this._playbackResource.volume&&(this._playbackResource.volume=b)}},c._calculateCurrentPosition=function(){return 1000*this._playbackResource.currentTime-this._startTime},c._updatePosition=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1);try{this._playbackResource.currentTime=0.001*(this._position+this._startTime)}catch(b){this._handleSetPositionSeek(null)}},c._handleSetPositionSeek=function(){null!=this._playbackResource&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},c._handleAudioSpriteLoop=function(){this._playbackResource.currentTime<=this._audioSpriteStopTime||(this._playbackResource.pause(),0==this._loop?this._handleSoundComplete(null):(this._position=0,this._loop--,this._playbackResource.currentTime=0.001*this._startTime,this._paused||this._playbackResource.play(),this._sendEvent("loop")))},c._handleLoop=function(){0==this._loop&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},c._updateDuration=function(){this._audioSpriteStopTime=0.001*(startTime+duration),this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},createjs.HTMLAudioSoundInstance=createjs.promote(d,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){function e(){this.AbstractPlugin_constructor(),this.defaultNumChannels=2,this._capabilities=f._capabilities,this._loaderClass=createjs.SoundLoader,this._soundInstanceClass=createjs.HTMLAudioSoundInstance}var d=createjs.extend(e,createjs.AbstractPlugin),f=e;f.MAX_INSTANCES=30,f._AUDIO_READY="canplaythrough",f._AUDIO_ENDED="ended",f._AUDIO_SEEKED="seeked",f._AUDIO_STALLED="stalled",f._TIME_UPDATE="timeupdate",f._capabilities=null,f.enableIOS=!1,f.isSupported=function(){return f._generateCapabilities(),null==f._capabilities?!1:!0},f._generateCapabilities=function(){if(null==f._capabilities){var i=document.createElement("audio");if(null==i.canPlayType){return null}f._capabilities={panning:!0,volume:!0,tracks:-1};for(var c=createjs.Sound.SUPPORTED_EXTENSIONS,n=createjs.Sound.EXTENSION_MAP,m=0,l=c.length;l>m;m++){var k=c[m],j=n[k]||k;f._capabilities[k]="no"!=i.canPlayType("audio/"+k)&&""!=i.canPlayType("audio/"+k)||"no"!=i.canPlayType("audio/"+j)&&""!=i.canPlayType("audio/"+j)}}},d.register=function(h,g){for(var l=createjs.HTMLAudioTagPool.get(h.src),k=null,j=0;g>j;j++){k=this._createTag(h.src),l.add(k)}var i=this.AbstractPlugin_register(h,g);return i.setTag(k),i},d.removeSound=function(b){this.AbstractPlugin_removeSound(b),createjs.HTMLAudioTagPool.remove(b)},d.create=function(h,g,j){var i=this.AbstractPlugin_create(h,g,j);return i.setPlaybackResource(null),i},d.toString=function(){return"[HTMLAudioPlugin]"},d.setVolume=d.getVolume=d.setMute=null,d._createTag=function(g){var c=document.createElement("audio");return c.autoplay=!1,c.preload="none",c.src=g,c},createjs.HTMLAudioPlugin=createjs.promote(e,"AbstractPlugin")}();